{
    "openapi": "3.0.0",
    "info": {
        "title": "OSM2CAI",
        "description": "Api documentation",
        "contact": {
            "email": "catastorei@cai.it"
        },
        "version": "1.0.0",
        "x-logo": {
            "url": "http://localhost:8000/assets/images/logo_sosec.jpg"
        }
    },
    "paths": {
        "/api/v1/hiking-routes/region/{region_code}/{sda}": {
            "get": {
                "tags": [
                    "hiking-routes"
                ],
                "operationId": "d6b251f086821ba0af123f1f21b6cb7e",
                "parameters": [
                    {
                        "name": "region_code",
                        "in": "path",
                        "description": "\nRegione code according to CAI convention: <br/>\n<br />A -> Friuli Venezia Giulia\n<br />B -> Veneto\n<br />C -> Trentino Alto Adige\n<br />D -> Lombardia\n<br />E -> Piemonte\n<br />F -> Val d'Aosta\n<br />G -> Liguria\n<br />H -> Emilia Romagna\n<br />L -> Toscana\n<br />M -> Marche\n<br />N -> Umbria\n<br />O -> Lazio\n<br />P -> Abruzzo\n<br />Q -> Molise\n<br />S -> Campania\n<br />R -> Puglia\n<br />T -> Basilicata\n<br />U -> Calabria\n<br />V -> Sicilia\n<br />Z -> Sardegna",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "varchar"
                        }
                    },
                    {
                        "name": "sda",
                        "in": "path",
                        "description": "SDA (stato di accatastamento) (e.g. 3 or 3,1 or 0,1,2). SDA=3 means ready to be validated, SDA=4 means validated by CAI expert",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "varchar"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Returns all the hiking routes OSM2CAI IDs based on the given region code and SDA number. \n     *                       These ids can be used in the geojson API hiking-route",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "description": "Internal osm2cai Identifier",
                                            "type": "integer"
                                        }
                                    },
                                    "type": "object",
                                    "example": [
                                        1269,
                                        652,
                                        273
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/hiking-routes-osm/region/{region_code}/{sda}": {
            "get": {
                "tags": [
                    "hiking-routes-osm"
                ],
                "operationId": "bc33a73211d35e85ee642851e575cd23",
                "parameters": [
                    {
                        "name": "region_code",
                        "in": "path",
                        "description": "\nRegione code according to CAI convention: <br/>\n<br />A -> Friuli Venezia Giulia\n<br />B -> Veneto\n<br />C -> Trentino Alto Adige\n<br />D -> Lombardia\n<br />E -> Piemonte\n<br />F -> Val d'Aosta\n<br />G -> Liguria\n<br />H -> Emilia Romagna\n<br />L -> Toscana\n<br />M -> Marche\n<br />N -> Umbria\n<br />O -> Lazio\n<br />P -> Abruzzo\n<br />Q -> Molise\n<br />S -> Campania\n<br />R -> Puglia\n<br />T -> Basilicata\n<br />U -> Calabria\n<br />V -> Sicilia\n<br />Z -> Sardegna",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "varchar"
                        }
                    },
                    {
                        "name": "sda",
                        "in": "path",
                        "description": "SDA (stato di accatastamento) (e.g. 3 or 3,1 or 0,1,2). SDA=3 means ready to be validated, SDA=4 means validated by CAI expert",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "varchar"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Returns all the hiking routes OSM IDs based on the given region code and SDA number.\n     *                       OSMID can be used in hiking-route-osm API or directly in OpenStreetMap relation by the following URL:\n     *                       https://openstreetmap.org/relation/{OSMID}. Remember that the data on OSM can be differente from data in \n     *                       OSM2CAI after validation.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "OSM": {
                                            "description": "Open Streen Map identification",
                                            "type": "integer"
                                        }
                                    },
                                    "type": "object",
                                    "example": [
                                        7766787,
                                        3151885,
                                        2736729
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/hiking-route/{id}": {
            "get": {
                "tags": [
                    "hiking-route"
                ],
                "operationId": "11427b4f47709888e728c843ba71736e",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "The OSM2CAI ID of a specific Hiking Route (e.g. 2421)",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Returns the geojson of a Hiking Route based on the given OSM2CAI ID.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "type": {
                                            "description": "Geojson type",
                                            "type": "string"
                                        },
                                        "properties": {
                                            "properties": {
                                                "id": {
                                                    "description": "OSM2CAI ID",
                                                    "type": "integer"
                                                },
                                                "relation_ID": {
                                                    "description": "OSMID",
                                                    "type": "integer"
                                                },
                                                "source": {
                                                    "description": "from SDA=3 and over must be survey:CAI or other values accepted by CAI as valid source",
                                                    "type": "string"
                                                },
                                                "cai_scale": {
                                                    "description": "CAI scale difficulty: T E EE",
                                                    "type": "string"
                                                },
                                                "from": {
                                                    "description": "start point",
                                                    "type": "string"
                                                },
                                                "to": {
                                                    "description": "end point",
                                                    "type": "string"
                                                },
                                                "ref": {
                                                    "description": "local ref hiking route number must be three number and a letter only in last position for variants",
                                                    "type": "string"
                                                },
                                                "sda": {
                                                    "description": "stato di accatastamento",
                                                    "type": "integer"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "geometry": {
                                            "properties": {
                                                "type": {
                                                    "description": "Postgis geometry types: LineString, MultiLineString",
                                                    "type": "string"
                                                },
                                                "coordinates": {
                                                    "description": "hiking routes coordinates (WGS84)",
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object",
                                    "example": {
                                        "type": "Feature",
                                        "properties": {
                                            "id": 2421,
                                            "relation_id": 4179533,
                                            "source": "survey:CAI",
                                            "cai_scale": "E",
                                            "from": "Castellare",
                                            "to": "Campo di Croce",
                                            "ref": "117",
                                            "sda": 3
                                        },
                                        "geometry": {
                                            "type": "MultiLineString",
                                            "coordinates": [
                                                [
                                                    [
                                                        10.4495294,
                                                        43.7615252
                                                    ],
                                                    [
                                                        10.4495998,
                                                        43.7615566
                                                    ]
                                                ]
                                            ]
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/hiking-route-osm/{id}": {
            "get": {
                "tags": [
                    "hiking-route-osm"
                ],
                "operationId": "d93bd37d1a815ded43468b397a6757fe",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "The OSM relation ID of a specific Hiking Route (e.g. 13442719)",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Returns the geojson of a Hiking Route based on the given OSM2CAI ID.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "type": {
                                            "description": "Geojson type",
                                            "type": "string"
                                        },
                                        "properties": {
                                            "properties": {
                                                "id": {
                                                    "description": "OSM2CAI ID",
                                                    "type": "integer"
                                                },
                                                "relation_ID": {
                                                    "description": "OSMID",
                                                    "type": "integer"
                                                },
                                                "source": {
                                                    "description": "from SDA=3 and over must be survey:CAI or other values accepted by CAI as valid source",
                                                    "type": "string"
                                                },
                                                "cai_scale": {
                                                    "description": "CAI scale difficulty: T E EE",
                                                    "type": "string"
                                                },
                                                "from": {
                                                    "description": "start point",
                                                    "type": "string"
                                                },
                                                "to": {
                                                    "description": "end point",
                                                    "type": "string"
                                                },
                                                "ref": {
                                                    "description": "local ref hiking route number must be three number and a letter only in last position for variants",
                                                    "type": "string"
                                                },
                                                "sda": {
                                                    "description": "stato di accatastamento",
                                                    "type": "integer"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "geometry": {
                                            "properties": {
                                                "type": {
                                                    "description": "Postgis geometry types: LineString, MultiLineString",
                                                    "type": "string"
                                                },
                                                "coordinates": {
                                                    "description": "hiking routes coordinates (WGS84)",
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object",
                                    "example": {
                                        "type": "Feature",
                                        "properties": {
                                            "id": 2421,
                                            "relation_id": 4179533,
                                            "source": "survey:CAI",
                                            "cai_scale": "E",
                                            "from": "Castellare",
                                            "to": "Campo di Croce",
                                            "ref": "117",
                                            "sda": 3
                                        },
                                        "geometry": {
                                            "type": "MultiLineString",
                                            "coordinates": [
                                                [
                                                    [
                                                        10.4495294,
                                                        43.7615252
                                                    ],
                                                    [
                                                        10.4495998,
                                                        43.7615566
                                                    ]
                                                ]
                                            ]
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "tags": [
        {
            "name": "hiking-routes",
            "description": "Hiking route ID list based on region and SDA"
        },
        {
            "name": "hiking-routes-osm",
            "description": "Hiking route OSM ID list based on regione CAI code and SDA"
        },
        {
            "name": "hiking-route",
            "description": "Geojson (https://datatracker.ietf.org/doc/html/rfc7946) of a Hiking Route based on the given OSM2CAI ID"
        },
        {
            "name": "hiking-route-osm",
            "description": "Geojson (https://datatracker.ietf.org/doc/html/rfc7946) of a Hiking Route based on the given OSM relation ID"
        }
    ]
}